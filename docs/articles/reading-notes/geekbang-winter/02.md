# 类型

在 JavaScript 规范中，共定义了七种数据类型，分为 “基本类型” 和 “引用类型” 两大类，如下所示：

基本类型：Undefined、Null、Boolean、String、Number、Symbol
引用类型：Object

## 基本类型和引用类型的区别

### 不可变性
基本类型，在 ECMAScript 标准中，它们被定义为 `primitive values` ，即原始值，代表值本身是不可被改变的。

基本类型的值被直接存储在栈中，在变量定义时，栈就为其分配好了内存空间。由于栈中的内存空间的大小是固定的，那么注定了存储在栈中的变量就是不可变的。

以字符串为例，我们在调用操作字符串的方法时，没有任何方法是可以直接改变字符串的。对其修改也只是修改变量指向的值，而值的本身是不课改变的。

```
let str = 'str'
str += '1'
console.log(str);  // str1
```

在上面的代码 `str` 是变量名，`'str'` 则是一个 String 类型的值，通过 `+=` 这个操作符会将一个新的 String 类型的值 `'str1'` 赋值给 `str` 这个变量。值本身是没有改变的。

引用类型的值实际存储在堆内存中，它在栈中只存储了一个固定长度的地址，这个地址指向堆内存中的值。因此引用类型的值是可以修改的。

### 复制

基本类型在复制的时候，会在栈中开辟一个新的内存空间来存储复制出来的值。这样以来二者指向的内存空间完全不同，这两个变量的操作就互不影响。

当我们复制引用类型的变量时，实际上复制的是栈中存储的地址，因此复制出来的变量实际上和之前的变量指向堆中同一个对象。这样以来操作会相互影响。

### 比较

对于原始类型，比较时会直接比较它们的值，如果值相等，即返回 true。

对于引用类型，比较时会比较它们的引用地址，即使两个变量在堆中存储的对象具有的属性值都是相等的，但是它们被存储在了不同的存储空间，因此比较值为 false。 

### 值传递和引用传递

> 所有的函数的参数都是按值传递的。

当函数参数是值类型的时候，修改函数参数的值是不能修改外部值。

当函数参数是引用类型时，我们同样将参数复制了一个副本到局部变量，只不过复制的这个副本是指向堆内存中的地址而已，我们在函数内部对对象的属性进行操作，实际上和外部变量指向堆内存中的值相同，但是这并不代表着引用传递，依然是值传递。

## Undefined

### 语义

表示一个变量最原始的状态，代表未定义的值，而非人为操作的结果

### 本质

undefined 是全局对象的一个属性。也就是说，它是全局作用域的一个变量，并非一个关键字。

### 获取 undefined

- 变量被声明了，但没有赋值时，就等于 undefined。
- 调用函数时，应该提供的参数没有提供，该参数等于 undefined。
- 对象没有赋值的属性，该属性的值为 undefined。
- 函数没有返回值时(没有写 return 或者 return 后面没有东西)，默认返回 undefined。

### void 0 代替 undefined

void 操作符 对任何表达式求值都返回 undefined ，这和函数执行操作后没有返回值的作用是一样的，JavaScript 中的函数都有返回值，当没有 return 操作时，就默认返回一个原始的状态值，这个值就是 undefined，表明函数的返回值未被定义。

undefined 是一个变量而不是关键字，为了避免被篡改一般使用 void 0 来获取 undefined 值。

## Null

### 语义

表示一个对象被人为的重置为空对象，而非一个变量最原始的状态。它只有一个值，即 null。

### 本质

null 在内存里的表示栈中的变量没有指向堆中的内存对象。当一个对象被赋值了 null 以后，原来的对象在内存中就处于游离状态，GC 会择机回收该对象并释放内存。因此，如果需要释放某个对象，就将变量设置为 null，即表示该对象已经被清空，目前无效状态。

### `typeof null == 'object'`

typeof 会将 null 误判为 Object 类型。

这是因为数据类型在底层都是以二进制形式表示的，二进制的前三位为 0 会被 typeof 判定为对象类型。

- 000 - 对象，数据是对象的应用
- 1 - 整型，数据是31位带符号整数
- 010 - 双精度类型，数据是双精度数字
- 100 - 字符串，数据是字符串
- 110 - 布尔类型，数据是布尔值

null 值的二进制表示全是 0 ，自然前三位当然也是 000，因此，typeof 会误以为是对象类型。

### null 和 undefined 的区别

null 表示无值,即该处不应该有值，也没有指向任何对象或者任何值，而 undefined 表示缺少值,表示应该有值，但是还没有定义，所以先指向全局变量 window.undefined 或者 undefined 来代替那个还没有定义的值。

使用 == 只判断值的时候，null 和 undefined 是一样的，但是使用 === 的时候，需要做类型判断，null 的类型为 Null, undefined 的类型为 Undefined

## Boolean

### 语义

表示逻辑上的真和假，它有两个值 true 和 false

### 转化

在 JavaScript 中，所有类型的值都可以转化为与 Boolean 等价的值。转化规则如下：

1. 所有对象都被当作 true
2. 空字符串被当作 false
3. null 和 undefined 被当作 false
4. 数字 0 和 NaN 被当作 false 
5. 出去 2，3，4 之外的值类型都被当做 true

只推荐使用 Boolean() 转换函数。

### 返回 Boolean 的操作符

#### 关系操作符：>，>=，<，<=


## String
## Number
## Symbol
## Object

## 参考
